@model IEnumerable<RestaurantSystem.Models.OrderDetail>

@{
    ViewData["Title"] = "Order Line Items";
}

<style>
    .table-details {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        overflow: hidden;
    }

        .table-details thead {
            background: #6c757d; /* رمادي فاتورة */
            color: white;
        }

        .table-details th, .table-details td {
            padding: 15px;
            vertical-align: middle;
        }
</style>

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <h1 class="fw-bold"><i class="fas fa-list-ol text-secondary me-2"></i>Order Items</h1>
        <a asp-action="Create" class="btn btn-secondary rounded-pill px-4 shadow-sm">
            <i class="fas fa-plus me-2"></i> Add Item
        </a>
    </div>

    <div class="table-responsive table-details">
        <table class="table mb-0 table-hover">
            <thead>
                <tr>
                    <th>Order #</th>
                    <th>Dish Name</th>
                    <th>Qty</th>
                    <th>Unit Price</th>
                    <th>Subtotal</th>
                    <th class="text-end">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="fw-bold">
                            <a asp-controller="Orders" asp-action="Details" asp-route-id="@item.OrderId" class="text-decoration-none">
                                #@item.OrderId
                            </a>
                        </td>
                        <td>
                            <div class="d-flex align-items-center">
                                <span class="badge bg-light text-dark border me-2">
                                    <i class="fas fa-utensils text-warning"></i>
                                </span>
                                @(item.Item?.Name ?? "Unknown Item")
                            </div>
                        </td>
                        <td><span class="badge bg-secondary rounded-pill">x @item.Quantity</span></td>
                        <td>$@item.Price</td>
                        <td class="fw-bold text-success">$@(item.Price * item.Quantity)</td>
                        <td class="text-end">
                            <div class="btn-group">
                                @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }, new { @class = "btn btn-sm btn-outline-warning" })
                                @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }, new { @class = "btn btn-sm btn-outline-info" })
                                @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ }, new { @class = "btn btn-sm btn-outline-danger" })
                            </div>
                            <small class="text-muted d-block mt-1" style="font-size:0.7rem">*Composite Key Action</small>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>